#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>
#include <Wire.h>
#include <Adafruit_MLX90614.h>
#include <Fonts/FreeMonoBold18pt7b.h> 



Adafruit_SSD1306 display(128, 64);           
Adafruit_MLX90614 mlx = Adafruit_MLX90614();  


const unsigned char PROGMEM frame0 [] = {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xF8, 0x00, 0x00, 0x00, 0x00, 0x3C, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x60, 0x43, 0x80, 0x00, 0x00, 0x01, 0x8A, 0x10, 0xC0, 0x00, 0x00, 0x03, 0x20, 0x00, 0x70, 0x00, 0x00, 0x06, 0x00, 0x00, 0x1C, 0x00, 0x00, 0x0D, 0x00, 0x00, 0x04, 0x00, 0x00, 0x18, 0x00, 0x00, 0x04, 0x00, 0x00, 0x30, 0x90, 0x00, 0x08, 0x00, 0x00, 0x20, 0xCA, 0x00, 0x0C, 0x00, 0x00, 0x21, 0x61, 0x70, 0xC4, 0x00, 0x00, 0x61, 0x1C, 0x07, 0xC4, 0x00, 0x00, 0x43, 0x07, 0xFC, 0x66, 0x00, 0x00, 0x42, 0x00, 0x00, 0x22, 0x00, 0x00, 0x46, 0x00, 0x00, 0x22, 0x00, 0x00, 0x44, 0x00, 0x00, 0x22, 0x00, 0x00, 0x44, 0xFC, 0x3F, 0x12, 0x00, 0x00, 0x64, 0x04, 0x01, 0x36, 0x00, 0x00, 0x2C, 0x00, 0x00, 0x14, 0x00, 0x00, 0x28, 0x30, 0x0C, 0x1C, 0x00, 0x00, 0x78, 0x30, 0x06, 0x1A, 0x00, 0x00, 0x58, 0x70, 0x0E, 0x1A, 0x00, 0x00, 0x4E, 0x20, 0x04, 0x76, 0x00, 0x00, 0x6B, 0x80, 0x01, 0xD4, 0x00, 0x00, 0x28, 0xF0, 0x0F, 0x14, 0x00, 0x00, 0x28, 0x1F, 0xF8, 0x14, 0x00, 0x00, 0x38, 0x00, 0x00, 0x1C, 0x00, 0x00, 0x19, 0x00, 0x00, 0x18, 0x00, 0x00, 0x08, 0x80, 0x01, 0x10, 0x00, 0x00, 0x08, 0x28, 0x10, 0x10, 0x00, 0x00, 0x08, 0x01, 0x40, 0x10, 0x00, 0x00, 0x0D, 0x00, 0x00, 0xB0, 0x00, 0x00, 0x04, 0x40, 0x02, 0x20, 0x00, 0x00, 0x02, 0x10, 0x14, 0x40, 0x00, 0x00, 0x03, 0x01, 0x40, 0xC0, 0x00, 0x00, 0x01, 0x80, 0x01, 0x80, 0x00, 0x00, 0x00, 0xC0, 0x03, 0x00, 0x00, 0x00, 0x00, 0x30, 0x0C, 0x00, 0x00, 0x00, 0x00, 0x1E, 0x38, 0x00, 0x00, 0x00, 0x00, 0x03, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00};




int GREEN=2;
int RED=7;

float reading[30];
float total ;
float temperature ;

void setup() {  
 
   pinMode(GREEN,OUTPUT);    
   pinMode(RED,OUTPUT); 
  
  
   
  delay(100);  

  display.begin(SSD1306_SWITCHCAPVCC, 0x3C);  
  display.clearDisplay(); 
  display.setTextColor(WHITE);  
  mlx.begin();  


}


int xx =42;
int yy=20;
int tt=0;



void loop() {
  display.clearDisplay();


total=0;
for (int i=0; i<30; i++)
{
  float value =mlx.readObjectTempC();
reading[i]= value *1;
total = total + reading[i];
delay (5);
}
temperature = total / 30.0;

  if(temperature>30){
  display.clearDisplay(); 
  display.setFont();
  display.setCursor(10,10);  // (x,y)
  display.println("VÜCUT SICAKLIĞINIZ");  // Text or value to print
  display.setCursor(14,2);  // (x,y)
  display.println(".");  // Text or value to print
  display.setCursor(17,2);  // (x,y)
  display.println(".");  // Text or value to print
  display.setCursor(88,4);  // (x,y)
  display.println("-");  // Text or value to print
  
  display.setFont(&FreeMonoBold18pt7b);  // Set a custom font
  display.setCursor(10,55);  // (x,y)
  display.println(temperature,1);
   display.setCursor(100,55);  // (x,y)
  display.println("C");  // Text or value to print
  display.setCursor(88,37);  // (x,y)
  display.println(".");  // Text or value to print 
  
  }

  if(mlx.readObjectTempC()<=30){
 

display.clearDisplay(); 
  display.setFont();
  display.setCursor(10,10);  // (x,y)
  display.println("SpecialCase Robot");  // Text or value to print
//display.clearDisplay();
display.drawBitmap(xx, yy,frame0,48,48, 1);
display.display();
delay(tt);



  }




 
   
  if((temperature)>=32 && (temperature)<=37  ){
    digitalWrite(GREEN,HIGH);
   digitalWrite(RED,LOW);
  }
  else if((temperature)>37) {
     digitalWrite(RED,HIGH);
     digitalWrite(GREEN,LOW);
     
  }
  else if((temperature)>38) {
     digitalWrite(RED,HIGH);
     digitalWrite(GREEN,LOW);
      
  }
else  {
     digitalWrite(RED,LOW);
     digitalWrite(GREEN,LOW);
}
 
  display.display();

}
